# Implementation Plan

## 🔄 Backend Manual 지침 반영을 위한 리팩토링 작업 (완료)

- [x] R1. **Repository 패턴 도입 및 데이터 접근 계층 분리**
- [x] R2. **DTO 패턴 적용 및 데이터 전달 객체 표준화**
- [x] R3. **Service 레이어 비즈니스 로직 순수화**
- [x] R4. **일관된 응답 구조 및 전역 Exception 처리**
- [x] R5. **Builder 패턴 적용 및 불변 객체 구현**
- [x] R6. **비동기 처리 최적화 및 성능 개선**

## 📋 기존 구현 완료 태스크 (완료)

- [x] 1. 성적 파일 업로드 시스템 구현 (부장교사 전용)
- [x] 2. 학생 데이터 모델 및 저장 구조 구현
- [x] 3. 학교 지원 등록 기본 기능 구현
- [x] 4. 우선선발 옵션 추가 (간단한 체크박스)
- [x] 5. 순위 계산 및 경쟁률 시스템 구현
- [x] 6. 지원 현황 대시보드 구현
- [x] 7. 회원가입 및 승인 시스템 구현
- [x] 8. 권한 기반 접근 제어 구현
- [x] 9. 실시간 업데이트 기능 구현
- [x] 10. 메인 대시보드 구현
- [x] 11. 데이터 보안 및 암호화 시스템 구현
- [x] 12. TDD 기반 테스트 및 성능 최적화

## 🚀 새로운 요구사항 기반 시스템 개선 태스크

### 🔐 인증 및 권한 시스템 개선

- [x] **N1. 가입 시 선택 가능한 3단계 역할 체계 구현**

  - **전체 5단계 등급 유지**: 개발자 > 관리자 > 3학년 부장 > 3학년 담임 > 일반교사
  - **가입 시 선택 가능한 3단계**:
    - **3학년 부장**: 해당 학교 3학년 전체 관리, 성적 업로드, 교사 승인 권한
    - **3학년 담임**: 자신의 반 학생 관리, 전체 현황 열람 (승인 권한 없음)
    - **일반교사**: 열람 전용 (관리 기능 없음, 필요시 열람 권한도 제한)
  - **시스템 관리 등급** (가입 시 선택 불가):
    - **개발자**: 모든 권한 (시스템 최고 관리자)
    - **관리자**: 전체 학교 관리 (개발자가 승격)
  - 회원가입 폼에서 3단계 역할 선택 UI 구현
  - 기존 사용자 데이터 호환성 유지
  - _Requirements: 가입 시 3단계 역할 선택 체계_

- [x] **N2. 초대 링크 기반 회원가입 시스템 구현**

  - 학교별 고유 코드가 포함된 초대 링크 생성 시스템
  - 초대 링크를 통한 자동 학교 매핑 (수정 불가)
  - 개발자/관리자 → 3학년 부장 초대 링크 발급
  - 3학년 부장 → 담임/일반교사 초대 링크 발급
  - 초대 링크 유효성 검증 및 만료 관리
  - _Requirements: 초대 링크 기반 가입 플로우_

- [x] **N3. 개선된 회원가입 플로우 구현**

  - 역할 선택에 따른 동적 입력 필드 변경
  - 3학년 부장: 담임 여부 선택 → 담임이면 학년/반 입력
  - 3학년 담임: 필수 학년/반 입력
  - 일반교사: 학급 정보 입력 없음
  - 입력 검증 및 오류 처리 강화
  - _Requirements: 역할별 차별화된 가입 플로우_

- [x] **N4. 계층적 승인 시스템 구현**

  - 개발자/관리자: 3학년 부장만 승인
  - 3학년 부장: 같은 학교 담임/일반교사 승인
  - 학교 코드 일치 검증 (다른 학교 교사 승인 불가)
  - 승인 대기, 승인 완료, 승인 거부 상태 관리
  - 승인 알림 시스템 (이메일/시스템 알림)
  - _Requirements: 계층적 승인 구조_

### 🎨 UI/UX 개선

- [ ] **N5. 로고 및 네비게이션 개선**

  - 로고 사이즈 확대 (현재 대비 1.5배 크기)
  - 로고 클릭 시 홈 화면 이동 기능 구현
  - 반응형 로고 디자인 (모바일/태블릿 대응)
  - 로고 hover 효과 및 접근성 개선
  - _Requirements: 로고 개선 및 홈 이동 기능_

- [ ] **N6. 비밀번호 찾기 기능 구현**
  - 이메일 기반 비밀번호 재설정 시스템
  - 임시 비밀번호 발급 또는 재설정 링크 전송
  - 비밀번호 재설정 페이지 구현
  - 보안 질문 기반 본인 확인 (선택사항)
  - 비밀번호 변경 이력 관리
  - _Requirements: 비밀번호 찾기 기능_

### 👥 관리자 기능 강화

- [ ] **N7. 관리자/개발자 회원 관리 탭 구현**

  - 전체 회원 목록 조회 및 검색/필터링
  - 회원 승인/거부 일괄 처리 기능
  - 회원 등급 변경 (3학년 부장 ↔ 담임 ↔ 일반교사)
  - 회원 탈퇴 처리 및 데이터 보존 정책
  - 회원 활동 이력 조회 (로그인, 업로드, 지원 등록 등)
  - 통계 대시보드 (학교별 가입자 수, 활성 사용자 등)
  - _Requirements: 관리자 회원 관리 기능_

- [ ] **N8. 3학년 부장 교사 승인 탭 구현**
  - 같은 학교 소속 교사 승인 대기 목록
  - 교사 정보 상세 조회 (이름, 역할, 학급 정보 등)
  - 승인/거부 처리 및 사유 입력
  - 승인된 교사 목록 관리
  - 교사별 권한 설정 (일반교사 열람 권한 제한 등)
  - 학교 내 교사 통계 및 현황
  - _Requirements: 부장교사 승인 관리 기능_

### 🔒 보안 시스템 간소화

- [ ] **N9. 업로드 시 비밀번호 암호화 제거**
  - 기존 클라이언트 측 암호화 로직 제거
  - 로그인 기반 보안으로 대체 (JWT 토큰 검증 강화)
  - 파일 업로드 시 사용자 인증 상태만 확인
  - 업로드 권한 검증 (3학년 부장만 업로드 가능)
  - 업로드 로그 및 감사 추적 강화
  - _Requirements: 보안 간소화 및 로그인 기반 보안_

### 📊 데이터 모델 개선

- [ ] **N10. 연도별 데이터 관리 시스템 구현**
  - 계정 고정 정보와 연도별 정보 분리
  - 고정 정보: 이름, 이메일, 소속 학교, 승인 상태
  - 연도별 정보: 회원 분류, 담임 여부, 학년/반
  - 새 학년 시작 시 권한 초기화 및 재승인 프로세스
  - 과거 데이터 보존 및 연도별 조회 기능
  - 연도 전환 관리자 도구 구현
  - _Requirements: 연도별 데이터 관리_

### 🧪 테스트 및 품질 보증

- [ ] **N11. 새로운 기능 TDD 테스트 구현**
  - 초대 링크 시스템 단위/통합 테스트
  - 계층적 승인 시스템 테스트
  - 역할 기반 권한 검증 테스트
  - 연도별 데이터 관리 테스트
  - UI 컴포넌트 테스트 (로고, 네비게이션 등)
  - E2E 테스트 시나리오 업데이트
  - _Requirements: 새 기능 테스트 커버리지 80% 이상_

### 📱 프론트엔드 개선

- [ ] **N12. React 컴포넌트 및 API 연동 개선**
  - 새로운 역할 체계에 맞는 컴포넌트 리팩토링
  - 초대 링크 처리 컴포넌트 구현
  - 관리자 회원 관리 대시보드 구현
  - 부장교사 승인 관리 인터페이스 구현
  - 비밀번호 찾기 플로우 구현
  - 반응형 디자인 개선 (로고, 네비게이션)
  - _Requirements: 새 기능 프론트엔드 구현_

### 🎯 **전체 사용자 등급 체계 (5단계)**

| **등급**       | **권한**  | **기능**                          | **가입 방식**       |
| -------------- | --------- | --------------------------------- | ------------------- |
| **개발자**     | 최고 권한 | 모든 시스템 관리                  | 시스템 생성 시 설정 |
| **관리자**     | 전체 관리 | 모든 학교 관리, 부장 승인         | 개발자가 승격       |
| **3학년 부장** | 학교 관리 | 성적 업로드, 학교 관리, 교사 승인 | **가입 시 선택**    |
| **3학년 담임** | 반 관리   | 자신의 반 관리, 전체 현황 열람    | **가입 시 선택**    |
| **일반교사**   | 열람 전용 | 열람 전용 (제한 가능)             | **가입 시 선택**    |

### 🔗 **승인 구조**

```
개발자 ──→ 관리자 승격
    ↓
개발자/관리자 ──→ 3학년 부장 승인
    ↓
3학년 부장 ──→ 3학년 담임/일반교사 승인
```

## 🎯 구현 우선순위

### Phase 1: 핵심 인증 시스템 (1-2주)

1. N1. 새로운 사용자 역할 체계 구현
2. N2. 초대 링크 기반 회원가입 시스템
3. N3. 개선된 회원가입 플로우
4. N9. 업로드 시 비밀번호 암호화 제거

### Phase 2: 관리 기능 강화 (1-2주)

5. N4. 계층적 승인 시스템 구현
6. N7. 관리자/개발자 회원 관리 탭
7. N8. 3학년 부장 교사 승인 탭

### Phase 3: UI/UX 및 부가 기능 (1주)

8. N5. 로고 및 네비게이션 개선
9. N6. 비밀번호 찾기 기능
10. N12. React 컴포넌트 개선

### Phase 4: 고급 기능 및 테스트 (1주)

11. N10. 연도별 데이터 관리 시스템
12. N11. 새로운 기능 TDD 테스트

## 📋 완료 체크리스트

각 태스크 완료 시 다음 사항을 확인:

- [ ] 기능 구현 완료
- [ ] 단위 테스트 작성 및 통과
- [ ] API 문서 업데이트
- [ ] 프론트엔드 연동 테스트
- [ ] 사용자 권한 검증
- [ ] 성능 테스트 통과
- [ ] 코드 리뷰 완료
